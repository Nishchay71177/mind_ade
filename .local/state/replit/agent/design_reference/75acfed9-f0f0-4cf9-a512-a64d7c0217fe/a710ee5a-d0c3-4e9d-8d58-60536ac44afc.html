<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodWise - AI Mood Tracking Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'sans': ['Inter', 'system-ui', 'sans-serif'],
                },
                colors: {
                    primary: {
                        50: '#EEF2FF',
                        500: '#4F46E5',
                        600: '#4338CA',
                        700: '#3730A3'
                    },
                    secondary: {
                        50: '#ECFDF5',
                        500: '#059669',
                        600: '#047857'
                    },
                    accent: {
                        500: '#06B6D4',
                        600: '#0891B2'
                    }
                }
            }
        }
    };
    </script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen font-sans">
    <!-- @COMPONENT: AppHeader -->
    <header class="bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center">
                    <i class="fas fa-brain text-white text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-semibold text-slate-900">MoodWise</h1>
                    <p class="text-sm text-slate-600">AI Mood Tracking Companion</p>
                </div>
            </div>
            
            <!-- @STATE: isAuthenticated:boolean = false -->
            <div class="flex items-center space-x-4">
                <div data-mock="true" class="hidden md:flex items-center space-x-2 text-sm text-slate-600">
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span>Anonymous Mode</span>
                </div>
                
                <!-- Login/Profile Section -->
                <button data-event="click:handleGoogleAuth" data-implementation="Implement Google OAuth with 2FA" 
                        class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2">
                    <i class="fab fa-google"></i>
                    <span>Sign in with Google</span>
                </button>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: AppHeader -->

    <main class="max-w-6xl mx-auto px-4 py-6">
        <!-- Benefits Banner for Anonymous Users -->
        <div data-mock="true" class="mb-6 bg-gradient-to-r from-primary-50 to-secondary-50 border border-primary-200 rounded-xl p-4">
            <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                    <i class="fas fa-info text-white text-sm"></i>
                </div>
                <div>
                    <h3 class="font-semibold text-slate-900 mb-1">Get More with Sign In</h3>
                    <p class="text-sm text-slate-700 mb-2">Sign in with Google to unlock persistent mood tracking, detailed analytics, and chat history.</p>
                    <div class="flex flex-wrap gap-4 text-xs text-slate-600">
                        <span class="flex items-center"><i class="fas fa-chart-line mr-1"></i> Mood Trends</span>
                        <span class="flex items-center"><i class="fas fa-history mr-1"></i> Chat History</span>
                        <span class="flex items-center"><i class="fas fa-cloud mr-1"></i> Data Sync</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- @COMPONENT: TabNavigation -->
        <div class="mb-6">
            <nav class="flex space-x-1 bg-white rounded-xl p-1 shadow-sm border border-slate-200">
                <button data-event="click:switchTab" data-tab="chat" 
                        class="tab-button active flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 bg-primary-500 text-white">
                    <i class="fas fa-comments"></i>
                    <span>Chat</span>
                </button>
                <button data-event="click:switchTab" data-tab="analytics" 
                        class="tab-button flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all duration-200 text-slate-600 hover:text-slate-900 hover:bg-slate-50">
                    <i class="fas fa-chart-area"></i>
                    <span>Analytics</span>
                </button>
            </nav>
        </div>
        <!-- @END_COMPONENT: TabNavigation -->

        <!-- @COMPONENT: ChatInterface -->
        <div id="chat-tab" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Chat Area -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 h-[600px] flex flex-col">
                        <!-- Chat Header -->
                        <div class="p-4 border-b border-slate-200 flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-accent-500 to-primary-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-white"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-900">MoodWise AI</h3>
                                    <div class="flex items-center space-x-1 text-sm text-green-600">
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                        <span>Online</span>
                                    </div>
                                </div>
                            </div>
                            <button data-event="click:clearChat" class="text-slate-400 hover:text-slate-600 transition-colors">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>

                        <!-- Chat Messages -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chat-messages">
                            <!-- AI Welcome Message -->
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-primary-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                                <div class="bg-slate-100 rounded-xl rounded-tl-sm p-3 max-w-md">
                                    <p data-mock="true" class="text-slate-800">Hello! I'm MoodWise, your AI companion for mood tracking and emotional wellness. How are you feeling today? Feel free to share what's on your mind.</p>
                                    <div class="mt-2 text-xs text-slate-500">Just now</div>
                                </div>
                            </div>

                            <!-- User Message Example -->
                            <div data-mock="true" class="flex items-start space-x-3 justify-end">
                                <div class="bg-primary-500 text-white rounded-xl rounded-tr-sm p-3 max-w-md">
                                    <p>I've been feeling a bit stressed lately with work. It's been overwhelming.</p>
                                    <div class="mt-2 text-xs text-primary-200">2 minutes ago</div>
                                </div>
                                <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-user text-slate-600 text-sm"></i>
                                </div>
                            </div>

                            <!-- AI Response with Mood Score -->
                            <div data-mock="true" class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-primary-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                                <div class="space-y-2 max-w-md">
                                    <div class="bg-slate-100 rounded-xl rounded-tl-sm p-3">
                                        <p class="text-slate-800">I understand that work stress can be really overwhelming. It's completely normal to feel this way when facing challenging situations. Would you like to talk more about what specifically is causing the most stress?</p>
                                        <div class="mt-2 text-xs text-slate-500">1 minute ago</div>
                                    </div>
                                    <!-- Mood Score Indicator -->
                                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-2 text-sm">
                                        <div class="flex items-center justify-between">
                                            <span class="text-yellow-800 font-medium">Detected Mood Score:</span>
                                            <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded font-semibold">4.2/10</span>
                                        </div>
                                        <div class="mt-1 text-yellow-700 text-xs">Below baseline - stress detected</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Input -->
                        <div class="p-4 border-t border-slate-200">
                            <form data-event="submit:handleSendMessage" data-implementation="Send message to Groq API and update mood score" class="flex space-x-3">
                                <input type="text" placeholder="Share how you're feeling..." 
                                       class="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                                       data-bind="messageInput">
                                <button type="submit" class="bg-primary-500 hover:bg-primary-600 text-white p-3 rounded-xl transition-colors duration-200">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Current Session Sidebar -->
                <div class="space-y-4">
                    <!-- Current Mood -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-3 flex items-center">
                            <i class="fas fa-heart mr-2 text-red-400"></i>
                            Current Session
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-slate-600">Mood Score</span>
                                <span data-bind="currentMoodScore" class="font-semibold text-lg text-primary-600">4.2/10</span>
                            </div>
                            <div class="w-full bg-slate-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-red-400 to-yellow-400 h-2 rounded-full" style="width: 42%"></div>
                            </div>
                            <div class="text-sm text-slate-600">
                                <span data-bind="sessionDuration">Session: 8 min</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-3 flex items-center">
                            <i class="fas fa-chart-simple mr-2 text-blue-400"></i>
                            Session Stats
                        </h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-slate-600">Messages</span>
                                <span data-bind="messageCount" class="font-medium">3</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Avg Response</span>
                                <span data-bind="avgResponseTime" class="font-medium">2.1s</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-600">Sentiment</span>
                                <span class="font-medium text-yellow-600">Concerned</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tips -->
                    <div class="bg-gradient-to-br from-secondary-50 to-primary-50 rounded-xl border border-secondary-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-2 flex items-center">
                            <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>
                            Wellness Tip
                        </h3>
                        <p data-mock="true" class="text-sm text-slate-700">Try the 4-7-8 breathing technique: Inhale for 4 counts, hold for 7, exhale for 8. This can help reduce stress and anxiety.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: ChatInterface -->

        <!-- @COMPONENT: AnalyticsInterface -->
        <div id="analytics-tab" class="tab-content hidden">
            <!-- Authentication Required Notice -->
            <div data-mock="true" class="mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-lock text-white text-sm"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-900">Sign In Required</h3>
                        <p class="text-sm text-slate-700">Analytics and mood history are available for authenticated users only. Sign in to access your personal mood insights.</p>
                    </div>
                </div>
            </div>

            <!-- Mock Analytics for Demo -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Main Chart -->
                <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-slate-900">Mood Trends</h3>
                        <select class="bg-slate-50 border border-slate-200 rounded-lg px-3 py-1 text-sm">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 3 months</option>
                        </select>
                    </div>
                    <div class="h-80">
                        <canvas id="moodChart" data-implementation="Implement Chart.js mood trend visualization"></canvas>
                    </div>
                </div>

                <!-- Analytics Sidebar -->
                <div class="space-y-4">
                    <!-- Summary Stats -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-4">Summary</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-600">Average Mood</span>
                                <span class="font-semibold text-lg text-primary-600">6.8/10</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-600">Best Day</span>
                                <span class="font-medium text-green-600">8.5/10</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-slate-600">Challenging Day</span>
                                <span class="font-medium text-red-500">3.2/10</span>
                            </div>
                        </div>
                    </div>

                    <!-- Insights -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-3">AI Insights</h3>
                        <div class="space-y-3 text-sm">
                            <div data-mock="true" class="bg-blue-50 rounded-lg p-3">
                                <p class="text-blue-800 font-medium">ðŸ“ˆ Trending Up</p>
                                <p class="text-blue-700">Your mood has improved 15% this week</p>
                            </div>
                            <div data-mock="true" class="bg-green-50 rounded-lg p-3">
                                <p class="text-green-800 font-medium">ðŸŒŸ Pattern Detected</p>
                                <p class="text-green-700">You feel best on weekends</p>
                            </div>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4">
                        <h3 class="font-semibold text-slate-900 mb-3">Export Data</h3>
                        <div class="space-y-2">
                            <button class="w-full bg-slate-100 hover:bg-slate-200 text-slate-700 py-2 px-3 rounded-lg text-sm transition-colors">
                                <i class="fas fa-download mr-2"></i>Download CSV
                            </button>
                            <button class="w-full bg-slate-100 hover:bg-slate-200 text-slate-700 py-2 px-3 rounded-lg text-sm transition-colors">
                                <i class="fas fa-file-pdf mr-2"></i>Generate Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: AnalyticsInterface -->
    </main>

    <!-- @COMPONENT: Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-6xl mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-brain text-white text-sm"></i>
                        </div>
                        <span class="font-semibold text-slate-900">MoodWise</span>
                    </div>
                    <p class="text-sm text-slate-600">AI-powered mood tracking for better mental wellness.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-900 mb-3">Features</h4>
                    <ul class="space-y-2 text-sm text-slate-600">
                        <li>AI Chat Companion</li>
                        <li>Mood Analytics</li>
                        <li>Secure Data Storage</li>
                        <li>Export Options</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-900 mb-3">Support</h4>
                    <ul class="space-y-2 text-sm text-slate-600">
                        <li>Privacy Policy</li>
                        <li>Terms of Service</li>
                        <li>Help Center</li>
                        <li>Contact Us</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-slate-200 mt-8 pt-6 text-center text-sm text-slate-500">
                <p>&copy; 2024 MoodWise. Built with care for mental wellness.</p>
            </div>
        </div>
    </footer>
    <!-- @END_COMPONENT: Footer -->

    <script>
        (function() {
            // TODO: Implement Groq API integration for AI chat responses
            // TODO: Implement PostgreSQL database operations for authenticated users
            // TODO: Implement Google OAuth with 2FA
            // TODO: Implement real-time mood score calculation
            
            // Tab switching functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;
                    
                    // Update button states
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active', 'bg-primary-500', 'text-white');
                        btn.classList.add('text-slate-600', 'hover:text-slate-900', 'hover:bg-slate-50');
                    });
                    button.classList.add('active', 'bg-primary-500', 'text-white');
                    button.classList.remove('text-slate-600', 'hover:text-slate-900', 'hover:bg-slate-50');
                    
                    // Update content visibility
                    tabContents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`${targetTab}-tab`).classList.remove('hidden');
                    
                    // Initialize chart if switching to analytics
                    if (targetTab === 'analytics') {
                        initializeMoodChart();
                    }
                });
            });
            
            // Initialize mood chart for analytics
            function initializeMoodChart() {
                const canvas = document.getElementById('moodChart');
                if (!canvas || canvas.chart) return;
                
                const ctx = canvas.getContext('2d');
                
                // Mock data for demonstration
                const mockData = {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Mood Score',
                        data: [6.2, 5.8, 7.1, 6.5, 5.9, 8.2, 7.8],
                        borderColor: '#4F46E5',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4F46E5',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                };
                
                canvas.chart = new Chart(ctx, {
                    type: 'line',
                    data: mockData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 10,
                                grid: {
                                    color: '#f1f5f9'
                                },
                                ticks: {
                                    color: '#64748b'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: '#64748b'
                                }
                            }
                        },
                        elements: {
                            point: {
                                hoverRadius: 8
                            }
                        }
                    }
                });
            }
            
            // Chat message handling (mock implementation)
            const chatForm = document.querySelector('form[data-event="submit:handleSendMessage"]');
            const chatMessages = document.getElementById('chat-messages');
            const messageInput = chatForm.querySelector('input[data-bind="messageInput"]');
            
            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const message = messageInput.value.trim();
                if (!message) return;
                
                // Add user message to chat
                addMessageToChat(message, 'user');
                messageInput.value = '';
                
                // Simulate AI response (in real implementation, this would call Groq API)
                setTimeout(() => {
                    const responses = [
                        "I hear you. It's important to acknowledge these feelings. Can you tell me more about what's contributing to this?",
                        "Thank you for sharing that with me. How has this been affecting your daily routine?",
                        "That sounds challenging. What support systems do you have in place?",
                        "I appreciate your openness. What would help you feel more balanced right now?"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessageToChat(randomResponse, 'ai');
                    
                    // Update mood score (mock)
                    updateMoodScore();
                }, 1500);
            });
            
            function addMessageToChat(message, sender) {
                const messageDiv = document.createElement('div');
                const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div class="flex items-start space-x-3 justify-end">
                            <div class="bg-primary-500 text-white rounded-xl rounded-tr-sm p-3 max-w-md">
                                <p>${message}</p>
                                <div class="mt-2 text-xs text-primary-200">${timestamp}</div>
                            </div>
                            <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-slate-600 text-sm"></i>
                            </div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-primary-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="bg-slate-100 rounded-xl rounded-tl-sm p-3 max-w-md">
                                <p class="text-slate-800">${message}</p>
                                <div class="mt-2 text-xs text-slate-500">${timestamp}</div>
                            </div>
                        </div>
                    `;
                }
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function updateMoodScore() {
                // Mock mood score calculation
                const newScore = (Math.random() * 4 + 4).toFixed(1); // Range 4.0-8.0
                const scoreElement = document.querySelector('[data-bind="currentMoodScore"]');
                if (scoreElement) {
                    scoreElement.textContent = `${newScore}/10`;
                }
                
                // Update progress bar
                const progressBar = document.querySelector('.bg-gradient-to-r');
                if (progressBar) {
                    progressBar.style.width = `${(newScore / 10) * 100}%`;
                }
            }
        })();
    </script>
</body>
</html>